<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Documentation | PyRC Wiki</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>PyRC Documentation</h1>
                <p class="tagline">Complete guide to the PyRC IRC client</p>
            </div>
        </header>

        <div class="sidebar">
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="quick-start.html">Quick Start</a></li>
                    <li><a href="getting-started.html">Getting Started</a></li>
                    <li><a href="api-documentation.html" class="active">API Documentation</a></li>
                    <!-- Other sidebar links -->
                </ul>
            </nav>
        </div>

        <main>
            <article>
                <h2>API Documentation</h2>
                <p class="lead">The PyRC API provides comprehensive interfaces for extending and customizing the IRC client's functionality. It is primarily exposed through the <code>ScriptAPIHandler</code> object passed to user scripts.</p>

                <div class="alert-box">
                    <strong>Note:</strong> This section provides a high-level overview and key examples. For the most detailed and up-to-date API reference, please refer to the source code of <code>pyrc_core/scripting/script_api_handler.py</code> and the specific event data structures in <code>pyrc_core/event_manager.py</code>.
                </div>

                <h3 id="scripting-system">Scripting System</h3>
                <p>PyRC's powerful Python scripting system allows you to extend and customize the client's functionality dynamically. Scripts can add new commands, handle a wide range of events, interact with the IRC server, and access/modify the client's internal state.</p>

                <h4>Script Structure</h4>
                <pre><code># scripts/my_first_script.py
import asyncio
from typing import Dict, Any, Optional, List
from pyrc_core.scripting.script_base import ScriptBase # Import ScriptBase

# Required factory function: PyRC calls this to get your script instance
def create_script(api):
    return MyFirstScript(api)

class MyFirstScript(ScriptBase): # Inherit from ScriptBase
    def __init__(self, api):
        super().__init__(api) # Call the base class constructor
        # Define script metadata (optional, can also be in metadata.json)
        self.name = "My First PyRC Script"
        self.version = "1.0.0"
        self.author = "Your Name"
        self.description = "A simple example script for PyRC."
        self.dependencies = [] # List of other script names this script depends on

    def load(self):
        """Called by ScriptManager when the script is loaded."""
        self.api.log_info(f"Script '{self.name}' (v{self.version}) loaded!")

        # Register a custom command
        self.api.register_command(
            name="echo",
            handler=self.handle_echo_command,
            help={
                "usage": "/echo <text>",
                "description": "Echoes the provided text back to the current context.",
                "aliases": ["say"],
                "category": "Utility"
            }
        )

        # Subscribe to an event
        self.api.subscribe_event("PRIVMSG", self.on_privmsg_received)
        self.api.subscribe_event("CLIENT_READY", self.on_client_ready)</code></pre>

                <!-- Additional sections would continue with the same formatting -->
                <!-- Script Metadata, ScriptAPIHandler Capabilities, Event Handling, etc. -->

            </article>
        </main>

        <footer>
            <p>PyRC &copy; 2025 | Open Source IRC Client</p>
        </footer>
    </div>
</body>
</html>
